#!/usr/bin/env bash

project=$(fd --ignore-file="$HOME/.fdprojectignore" -H -t d "\.git$" "$HOME" | \
    sed -e 's|/.git$||' -e "s|$HOME/||" | \
    fzf)

if [ -z "$project" ]; then
    exit 0
fi

sessari="$(basename $project)"
if ! tmux has-session -t=$sessari 2> /dev/null; then
    tmux new-session -ds $sessari -c $project
fi

tmux switch-client -t $sessari
